{% extends "base.html" %}
{% block content %}
<h2>Shopping Cart</h2>

{% if items %}
<table border="1" cellpadding="10">
    <tr>
        <th>Product</th>
        <th>Price</th>
        <th>Qty</th>
        <th>Subtotal</th>
        <th>Action</th>
    </tr>
    {% for item in items %}
    <tr>
        <td>{{ item.product.name }}</td>
        <td>₹{{ "%.2f"|format(item.product.price) }}</td>
        <td>{{ item.qty }}</td>
        <td>₹{{ "%.2f"|format(item.subtotal) }}</td>
        <td><a href="{{ url_for('remove_from_cart', product_id=item.product.id) }}" class="btn btn-danger">Remove</a></td>
    </tr>
    {% endfor %}
</table>

<h3>Total: ₹{{ "%.2f"|format(total) }}</h3>

<!-- Stripe Checkout -->
<form action="{{ url_for('stripe_checkout') }}" method="POST">
    <button type="submit" class="btn btn-primary">Pay with Card</button>
</form>

<!-- Wallet Checkout -->
<form action="{{ url_for('checkout') }}" method="POST" style="margin-top: 10px;">
    <button type="submit" class="btn btn-success">Pay with Wallet</button>
</form>

{% else %}
<p>Your cart is empty.</p>
{% endif %}

{% endblock %}
